{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\SpelaRK\\\\js_programming\\\\ReactJS\\\\urban-kravos\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\SpelaRK\\\\js_programming\\\\ReactJS\\\\urban-kravos\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\SpelaRK\\\\js_programming\\\\ReactJS\\\\urban-kravos\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\SpelaRK\\\\js_programming\\\\ReactJS\\\\urban-kravos\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\SpelaRK\\\\js_programming\\\\ReactJS\\\\urban-kravos\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\SpelaRK\\\\js_programming\\\\ReactJS\\\\urban-kravos\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{useParams}from'react-router-dom';var NewProject=/*#__PURE__*/function(_Component){_inherits(NewProject,_Component);function NewProject(props){var _this;_classCallCheck(this,NewProject);_this=_possibleConstructorReturn(this,_getPrototypeOf(NewProject).call(this,props));_this.handleImgChange=function(event){var _event$target=event.target,files=_event$target.files,name=_event$target.name;//za load bar, če bom rabil\n_this.setState({loaded:0});var formData=new FormData();formData.append('pFile',files[0]);var options={method:'POST',body:formData};fetch('/api/project/upload',options).then(function(res){return res.text();}).then(function(data){var inputsName=name.slice(0,4);_this.setState(_defineProperty({},inputsName,data));});};_this.handleTextChange=function(event){var _event$target2=event.target,value=_event$target2.value,name=_event$target2.name;_this.setState(_defineProperty({},name,value));};_this.handleAddProject=function(){var _this$state=_this.state,tittle=_this$state.tittle,postBody=_this$state.postBody,img1=_this$state.img1,img2=_this$state.img2,img3=_this$state.img3,gitUrl=_this$state.gitUrl;var options={method:'POST',body:JSON.stringify({tittle:tittle,postBody:postBody,img1:img1,img2:img2,img3:img3,gitUrl:gitUrl}),headers:{'Content-Type':'application/json'}};fetch('/api/project/add',options).then(function(res){console.log('RESPONSE FROM SERVER:');if(res.status===200){console.log(res);_this.setState({tittle:'',postBody:'',img1:'',img2:'',img3:'',gitUrl:'https://github.com/radicalb/',img1fileKey:'rKey1'+Date.now(),img2fileKey:'rKey2'+Date.now(),img3fileKey:'rKey3'+Date.now()});alert('Projekt uspešno dodan.');}else{var error=new Error(res.error);throw error;}}).catch(function(err){console.error(err);alert('Error adding project please try again');});};_this.state={tittle:'',postBody:'',img1:'',img2:'',img3:'',gitUrl:'https://github.com/radicalb/',img1fileKey:'rKey1'+Date.now(),img2fileKey:'rKey2'+Date.now(),img3fileKey:'rKey3'+Date.now()};return _this;}_createClass(NewProject,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(this.props.match);console.log(this.props.match.params);if(this.props.match.params.id){fetch('/api/project').then(function(res){if(res.status===200){res.json().then(function(data){console.log(data);var _id=data._id;console.log(_id);_this2.setState({tittle:data.tittle,postBody:data.postBody,img1:data.img1,img2:data.img2,img3:data.img3,gitUrl:data.gitUrl});});}else{var error=new Error(res.error);throw error;}}).catch(function(err){console.error(err);});}}},{key:\"getNewProjectButton\",value:function getNewProjectButton(){return React.createElement(\"button\",{type:\"button\",className:\"btn btn-success\",onClick:this.handleAddProject},\"Dodaj projekt\");}},{key:\"getEditProjectButton\",value:function getEditProjectButton(){return React.createElement(\"button\",{type:\"button\",className:\"btn btn-success\",onClick:this.handleEditProject},\"Shrani spremembe\");}},{key:\"getCorrectButton\",value:function getCorrectButton(){if(this.props.match.params.id){return this.getEditProjectButton();}else{return this.getNewProjectButton();}}},{key:\"render\",value:function render(){return React.createElement(\"section\",{className:\"page-section portfolio\",id:\"newProject\"},React.createElement(\"div\",{className:\"container\"},React.createElement(\"h2\",{className:\"page-section-heading text-center text-uppercase text-secondary mb-0\"},\"Dodaj projekt\"),React.createElement(\"div\",{className:\"divider-custom\"},React.createElement(\"div\",{className:\"divider-custom-line\"}),React.createElement(\"div\",{className:\"divider-custom-icon\"},React.createElement(\"i\",{className:\"fas fa-star\"})),React.createElement(\"div\",{className:\"divider-custom-line\"})),React.createElement(\"div\",{className:\"row justify-content-center\"},React.createElement(\"div\",{className:\"col-md-8 col-md-offset-2 text-left\"},React.createElement(\"form\",{action:\"\",method:\"POST\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{for:\"tittle\"},\"Title \",React.createElement(\"span\",{className:\"require\"},\"*\")),React.createElement(\"input\",{type:\"text\",className:\"form-control\",name:\"tittle\",value:this.state.tittle,onChange:this.handleTextChange})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{for:\"postBody\"},\"Description\"),React.createElement(\"textarea\",{rows:\"5\",className:\"form-control\",name:\"postBody\",value:this.state.postBody,onChange:this.handleTextChange})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{for:\"img1\"},\"Image1: \",React.createElement(\"span\",{className:\"require\"},\"*\")),React.createElement(\"input\",{type:\"file\",name:\"img1file\",key:this.state.img1fileKey,onChange:this.handleImgChange}),React.createElement(\"input\",{type:\"text\",className:\"form-control\",name:\"img1\",value:this.state.img1,onChange:this.handleTextChange})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{for:\"img2\"},\"Image2: \",React.createElement(\"span\",{className:\"require\"},\"*\")),React.createElement(\"input\",{type:\"file\",name:\"img2file\",key:this.state.img2fileKey,onChange:this.handleImgChange}),React.createElement(\"input\",{type:\"text\",className:\"form-control\",name:\"img2\",value:this.state.img2,onChange:this.handleTextChange})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{for:\"img3\"},\"Image3: \",React.createElement(\"span\",{className:\"require\"},\"* \")),React.createElement(\"input\",{type:\"file\",name:\"img3file\",key:this.state.img3fileKey,onChange:this.handleImgChange}),React.createElement(\"input\",{type:\"text\",className:\"form-control\",name:\"img3\",value:this.state.img3,onChange:this.handleTextChange})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{for:\"gitUrl\"},\"GitHub Url \",React.createElement(\"span\",{className:\"require\"},\"*\")),React.createElement(\"input\",{type:\"text\",className:\"form-control\",name:\"gitUrl\",value:this.state.gitUrl,onChange:this.handleTextChange})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"p\",null,React.createElement(\"span\",{className:\"require\"},\"*\"),\" - required fields\")),React.createElement(\"div\",{className:\"form-group\"},this.getCorrectButton(),React.createElement(\"a\",{href:\"/admin\",role:\"button\",className:\"btn btn-warning pull-right\"},\"Nazaj\")))))));}}]);return NewProject;}(Component);export default NewProject;","map":{"version":3,"sources":["C:/Users/SpelaRK/js_programming/ReactJS/urban-kravos/src/components/new-project.component.jsx"],"names":["React","Component","useParams","NewProject","props","handleImgChange","event","target","files","name","setState","loaded","formData","FormData","append","options","method","body","fetch","then","res","text","data","inputsName","slice","handleTextChange","value","handleAddProject","state","tittle","postBody","img1","img2","img3","gitUrl","JSON","stringify","headers","console","log","status","img1fileKey","Date","now","img2fileKey","img3fileKey","alert","error","Error","catch","err","match","params","id","json","_id","handleEditProject","getEditProjectButton","getNewProjectButton","getCorrectButton"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nclass NewProject extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tittle: '',\r\n      postBody: '',\r\n      img1: '',\r\n      img2: '',\r\n      img3: '',\r\n      gitUrl: 'https://github.com/radicalb/',\r\n      img1fileKey: 'rKey1' + Date.now(),\r\n      img2fileKey: 'rKey2' + Date.now(),\r\n      img3fileKey: 'rKey3' + Date.now()\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log(this.props.match);\r\n    console.log(this.props.match.params);\r\n    if (this.props.match.params.id) {\r\n      fetch('/api/project')\r\n        .then(res => {\r\n          if (res.status === 200) {\r\n            res.json().then(data => {\r\n              console.log(data);\r\n              const { _id } = data;\r\n              console.log(_id);\r\n\r\n              this.setState({\r\n                tittle: data.tittle,\r\n                postBody: data.postBody,\r\n                img1: data.img1,\r\n                img2: data.img2,\r\n                img3: data.img3,\r\n                gitUrl: data.gitUrl\r\n              });\r\n            });\r\n          } else {\r\n            const error = new Error(res.error);\r\n            throw error;\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n        });\r\n    }\r\n  }\r\n\r\n  getNewProjectButton() {\r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        className=\"btn btn-success\"\r\n        onClick={this.handleAddProject}\r\n      >\r\n        Dodaj projekt\r\n      </button>\r\n    );\r\n  }\r\n\r\n  getEditProjectButton() {\r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        className=\"btn btn-success\"\r\n        onClick={this.handleEditProject}\r\n      >\r\n        Shrani spremembe\r\n      </button>\r\n    );\r\n  }\r\n\r\n  getCorrectButton() {\r\n    if (this.props.match.params.id) {\r\n      return this.getEditProjectButton();\r\n    } else {\r\n      return this.getNewProjectButton();\r\n    }\r\n  }\r\n\r\n  handleImgChange = event => {\r\n    const { files, name } = event.target;\r\n\r\n    //za load bar, če bom rabil\r\n    this.setState({\r\n      loaded: 0\r\n    });\r\n\r\n    const formData = new FormData();\r\n    formData.append('pFile', files[0]);\r\n\r\n    const options = {\r\n      method: 'POST',\r\n      body: formData\r\n    };\r\n\r\n    fetch('/api/project/upload', options)\r\n      .then(res => {\r\n        return res.text();\r\n      })\r\n      .then(data => {\r\n        const inputsName = name.slice(0, 4);\r\n        this.setState({\r\n          [inputsName]: data\r\n        });\r\n      });\r\n  };\r\n\r\n  handleTextChange = event => {\r\n    const { value, name } = event.target;\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n  };\r\n\r\n  handleAddProject = () => {\r\n    const { tittle, postBody, img1, img2, img3, gitUrl } = this.state;\r\n\r\n    const options = {\r\n      method: 'POST',\r\n      body: JSON.stringify({ tittle, postBody, img1, img2, img3, gitUrl }),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    };\r\n\r\n    fetch('/api/project/add', options)\r\n      .then(res => {\r\n        console.log('RESPONSE FROM SERVER:');\r\n        if (res.status === 200) {\r\n          console.log(res);\r\n          this.setState({\r\n            tittle: '',\r\n            postBody: '',\r\n            img1: '',\r\n            img2: '',\r\n            img3: '',\r\n            gitUrl: 'https://github.com/radicalb/',\r\n            img1fileKey: 'rKey1' + Date.now(),\r\n            img2fileKey: 'rKey2' + Date.now(),\r\n            img3fileKey: 'rKey3' + Date.now()\r\n          });\r\n          alert('Projekt uspešno dodan.');\r\n        } else {\r\n          const error = new Error(res.error);\r\n          throw error;\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n        alert('Error adding project please try again');\r\n      });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <section className=\"page-section portfolio\" id=\"newProject\">\r\n        <div className=\"container\">\r\n          <h2 className=\"page-section-heading text-center text-uppercase text-secondary mb-0\">\r\n            Dodaj projekt\r\n          </h2>\r\n\r\n          <div className=\"divider-custom\">\r\n            <div className=\"divider-custom-line\"></div>\r\n            <div className=\"divider-custom-icon\">\r\n              <i className=\"fas fa-star\"></i>\r\n            </div>\r\n            <div className=\"divider-custom-line\"></div>\r\n          </div>\r\n          <div className=\"row justify-content-center\">\r\n            <div className=\"col-md-8 col-md-offset-2 text-left\">\r\n              <form action=\"\" method=\"POST\">\r\n                <div className=\"form-group\">\r\n                  <label for=\"tittle\">\r\n                    Title <span className=\"require\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    name=\"tittle\"\r\n                    value={this.state.tittle}\r\n                    onChange={this.handleTextChange}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label for=\"postBody\">Description</label>\r\n                  <textarea\r\n                    rows=\"5\"\r\n                    className=\"form-control\"\r\n                    name=\"postBody\"\r\n                    value={this.state.postBody}\r\n                    onChange={this.handleTextChange}\r\n                  ></textarea>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label for=\"img1\">\r\n                    Image1: <span className=\"require\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"file\"\r\n                    name=\"img1file\"\r\n                    key={this.state.img1fileKey}\r\n                    onChange={this.handleImgChange}\r\n                  />\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    name=\"img1\"\r\n                    value={this.state.img1}\r\n                    onChange={this.handleTextChange}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label for=\"img2\">\r\n                    Image2: <span className=\"require\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"file\"\r\n                    name=\"img2file\"\r\n                    key={this.state.img2fileKey}\r\n                    onChange={this.handleImgChange}\r\n                  />\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    name=\"img2\"\r\n                    value={this.state.img2}\r\n                    onChange={this.handleTextChange}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label for=\"img3\">\r\n                    Image3: <span className=\"require\">* </span>\r\n                  </label>\r\n                  <input\r\n                    type=\"file\"\r\n                    name=\"img3file\"\r\n                    key={this.state.img3fileKey}\r\n                    onChange={this.handleImgChange}\r\n                  />\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    name=\"img3\"\r\n                    value={this.state.img3}\r\n                    onChange={this.handleTextChange}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label for=\"gitUrl\">\r\n                    GitHub Url <span className=\"require\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    name=\"gitUrl\"\r\n                    value={this.state.gitUrl}\r\n                    onChange={this.handleTextChange}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <p>\r\n                    <span className=\"require\">*</span> - required fields\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  {this.getCorrectButton()}\r\n                  <a\r\n                    href=\"/admin\"\r\n                    role=\"button\"\r\n                    className=\"btn btn-warning pull-right\"\r\n                  >\r\n                    Nazaj\r\n                  </a>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NewProject;\r\n"]},"metadata":{},"sourceType":"module"}