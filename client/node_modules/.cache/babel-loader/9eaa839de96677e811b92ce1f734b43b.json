{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SpelaRK\\\\js_programming\\\\ReactJS\\\\urban-kravos\\\\src\\\\components\\\\admin.component.jsx\";\nimport React, { Component } from 'react';\nimport AdminProjectListElement from './admin-project-list-element.component';\n\nclass Admin extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      projects: []\n    };\n\n    this.handleDelete = id => {\n      const options = {\n        method: 'DELETE',\n        body: JSON.stringify({\n          _id: id\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      fetch('/api/project/delete', options).then(res => {\n        if (res.status === 200) {\n          let projects = this.state.projects.filter(project => project._id !== id);\n          this.setState({\n            projects\n          });\n        } else {\n          const error = new Error(res.error);\n          throw error;\n        }\n      }).catch(err => {\n        console.error(err);\n        alert('Error deleting project please try again');\n      });\n    };\n  }\n\n  componentDidMount() {\n    fetch('/api/project').then(res => {\n      if (res.status === 200) {\n        res.json().then(data => {\n          this.setState({\n            projects: data\n          });\n        });\n      } else {\n        const error = new Error(res.error);\n        throw error;\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  render() {\n    return React.createElement(\"section\", {\n      className: \"page-section portfolio\",\n      id: \"admin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"page-section-heading text-center text-uppercase text-secondary mb-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"Admin\"), React.createElement(\"div\", {\n      className: \"divider-custom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"divider-custom-line\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"divider-custom-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-star\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"divider-custom-line\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"row justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-8 col-md-offset-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      role: \"button\",\n      href: \"/addproject\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Dodaj projekt\"), React.createElement(\"table\", {\n      className: \"w-100 h-100 text-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, this.state.projects.map(project => React.createElement(AdminProjectListElement, {\n      project: project,\n      onRemove: this.handleDelete,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    })))))));\n  }\n\n}\n\nexport default Admin;","map":{"version":3,"sources":["C:/Users/SpelaRK/js_programming/ReactJS/urban-kravos/src/components/admin.component.jsx"],"names":["React","Component","AdminProjectListElement","Admin","state","projects","handleDelete","id","options","method","body","JSON","stringify","_id","headers","fetch","then","res","status","filter","project","setState","error","Error","catch","err","console","alert","componentDidMount","json","data","render","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport AdminProjectListElement from './admin-project-list-element.component';\r\n\r\nclass Admin extends Component {\r\n  state = {\r\n    projects: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    fetch('/api/project')\r\n      .then(res => {\r\n        if (res.status === 200) {\r\n          res.json().then(data => {\r\n            this.setState({\r\n              projects: data\r\n            });\r\n          });\r\n        } else {\r\n          const error = new Error(res.error);\r\n          throw error;\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  handleDelete = id => {\r\n    const options = {\r\n      method: 'DELETE',\r\n      body: JSON.stringify({ _id: id }),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    };\r\n\r\n    fetch('/api/project/delete', options)\r\n      .then(res => {\r\n        if (res.status === 200) {\r\n          let projects = this.state.projects.filter(\r\n            project => project._id !== id\r\n          );\r\n\r\n          this.setState({ projects });\r\n        } else {\r\n          const error = new Error(res.error);\r\n          throw error;\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n        alert('Error deleting project please try again');\r\n      });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <section className=\"page-section portfolio\" id=\"admin\">\r\n        <div className=\"container\">\r\n          <h2 className=\"page-section-heading text-center text-uppercase text-secondary mb-0\">\r\n            Admin\r\n          </h2>\r\n\r\n          <div className=\"divider-custom\">\r\n            <div className=\"divider-custom-line\"></div>\r\n            <div className=\"divider-custom-icon\">\r\n              <i className=\"fas fa-star\"></i>\r\n            </div>\r\n            <div className=\"divider-custom-line\"></div>\r\n          </div>\r\n          <div className=\"row justify-content-center\">\r\n            <div className=\"col-md-8 col-md-offset-2\">\r\n              <a role=\"button\" href=\"/addproject\" className=\"btn btn-primary\">\r\n                Dodaj projekt\r\n              </a>\r\n\r\n              <table className=\"w-100 h-100 text-right\">\r\n                {this.state.projects.map(project => (\r\n                  <AdminProjectListElement\r\n                    project={project}\r\n                    onRemove={this.handleDelete}\r\n                  />\r\n                ))}\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Admin;\r\n"]},"metadata":{},"sourceType":"module"}